unit unit_preferences;{File name:  Preferences.Pas  }{Function: Handle a dialog}{History: 12/12/90 Original by Prototyper.   }{2015-11-04 Second Edition by Alan Canon: removed scaffolding created by Prototyper, add helper functions}{for commonly performed operations on checkboxes and textboxes, moved to unit_dialog_helper.pas}interfaceuses{$IFC UNDEFINED THINK_Pascal}  Quickdraw, Types,{$ENDC}  unit_boxes, unit_atoms, unit_strbuffer, unit_muts;type  ArthromorphPreferencesHandle = ^ArthromorphPreferencesPtr;  ArthromorphPreferencesPtr = ^ArthromorphPreferences;  ArthromorphPreferences = record    genomeStrBuffer: StrBufferHandle;    wantColor: boolean;    sideways: boolean;    centring: boolean;    enlargebrood: boolean;    resizing: boolean;    redraw: boolean;    startingUp: boolean;    expandingBoxes: boolean;    tickdelay: longint;    discrepThreshold: integer;    decimationFactor: integer;    muts: ArthromorphMutationsHandle;    BreedingWindow: WindowPtr;    GenomeWindow: WindowPtr;    AboutArthromorphsWindow: WindowPtr;    theBoxes: BoxesHandle;    ParamOffset: KindsData;  end;function NewArthromorphPreferences: ArthromorphPreferencesHandle;procedure DisposeArthromorphPreferences(prefs: ArthromorphPreferencesHandle);implementation{$IFC UNDEFINED THINK_Pascal}uses  Memory;{$ENDC}function NewArthromorphPreferences: ArthromorphPreferencesHandle;var prefs: ArthromorphPreferencesHandle;begin  prefs := ArthromorphPreferencesHandle(    NewHandle(SizeOf(ArthromorphPreferences)));  {Initialize Preferences}  with prefs^^ do    begin      genomeStrBuffer := NewStrBuffer;      resizing := False;      startingup := true;      redraw := false;      wantColor := True;      sideways := False;      centring := True;      enlargebrood := false;      tickdelay := 2;      discrepThreshold := 20;      decimationFactor := 2;      BreedingWindow := nil;      muts := NewMutations;      theBoxes := NewBoxes(3, 5);      ParamOffset[AnimalTrunk] := 1;    	ParamOffset[AnimalJoint] := 4;    	ParamOffset[AnimalClaw] := 7;    	ParamOffset[SectionTrunk] := 1;    	ParamOffset[SectionJoint] := 4;    	ParamOffset[SectionClaw] := 7;    	ParamOffset[SegmentTrunk] := 1;    	ParamOffset[SegmentJoint] := 4;    	ParamOffset[SegmentClaw] := 7;    	ParamOffset[Joint] := 4;    	ParamOffset[Claw] := 7;    end;  NewArthromorphPreferences := prefs;end;procedure DisposeArthromorphPreferences(prefs: ArthromorphPreferencesHandle);begin  with prefs^^ do    begin      DisposeStrBuffer(genomeStrBuffer);      genomeStrBuffer := nil;      DisposeBoxes(theBoxes);      theBoxes := nil;      DisposeHandle(Handle(prefs));    end;end;end. {unit}